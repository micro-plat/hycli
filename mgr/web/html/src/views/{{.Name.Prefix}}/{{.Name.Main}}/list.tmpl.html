{-{- $table := .}-}
{-{- $lcols :=fltrColumns $table "l"}-}
{-{- $lecols :=fltrColumns $table "le"}-}
{-{- $leLen := len $lecols}-}
{-{- $lstopts :=.ListOpts}-}
{-{- $optLen := len $lstopts}-}
{-{- $tmpl :=IsTmplTb .}-}

{-{- if gt (len $lcols) 0 }-}
<div class="list">
    <el-table :data="dataList_{-{.UNQ}-}" 
    {-{ if and (eq $table.NeedBatchCheck true) (eq false $tmpl)}-}@selection-change="handleSelectionChange" {-{end}-}
    v-loading="conf.loading" stripe {-{if eq true $tmpl }-}
        style="width: 100%;height:300px" {-{else }-} style="width: 100%;height:calc(100vh - 160px)" {-{- end}-}
        size="small" empty-text="无数据">le
        {-{- if gt $leLen 0 }-}
        {-{- template "le.tmpl.html" $lecols }-}
        {-{- end}-}
        <!--NeedBatchCheck  {-{$table.NeedBatchCheck}-}  {-{$tmpl}-}-->
        {-{ if and (eq $table.NeedBatchCheck true) (eq false $tmpl)}-}  <el-table-column type="selection" width="22" /> {-{end}-}
       
        {-{- range $i,$c:=$lcols }-}
        {-{- if eq "switch" $c.Cmpnt.Type}-}
        <el-table-column   {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{end}-}  align="center" label="{-{$c.Label}-}">
            <template #default="scope">
                <el-switch {-{if ne true $tmpl}-} @change="on{-{$c.Name}-}SwitchChange(scope.row)" {-{else}-} disabled  {-{end}-} v-model="scope.row.{-{$c.Name}-}_switch" />
            </template>
        </el-table-column>
        {-{- else if eq "progress" $c.Cmpnt.Type}-}
        <el-table-column  {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{else}-} width="100" {-{end}-} align="center" label="{-{$c.Label}-}">
            <template #default="scope">
                <el-progress :stroke-width="4"   :percentage="scope.row.{-{$c.Name}-}_progress" :color="conf.progressColor" />
            </template>
        </el-table-column>
        {-{- else if eq "img" $c.Cmpnt.Type}-}
        <el-table-column  {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{end}-} align="center" label="{-{$c.Label}-}">
            <template #default="scope">
                <el-image style="width:48px" :src="scope.row.{-{$c.Name}-}" :fit="contain">
                    <template #error>
                        <div class="image-slot">
                            <el-icon>
                                <icon-picture />
                            </el-icon>
                        </div>
                    </template>
                </el-image>
            </template>
        </el-table-column>
        {-{- else if eq "link" $c.Cmpnt.Type}-}
        <el-table-column  {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{end}-} {-{if eq true $c.Style.HideOverflow}-} :show-overflow-tooltip="true" {-{end}-}  align="center" label="{-{$c.Label}-}">
            <template #default="scope">
                <el-link target="_blank" type="success" :href="scope.row.{-{$c.Name}-}" :title="scope.row.{-{$c.Name}-}">查看</el-link>
            </template>
        </el-table-column>
        {-{- else if eq true $c.Enum.IsEnum}-}
        <el-table-column  {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{end}-} {-{if eq true $c.Style.HideOverflow}-} :show-overflow-tooltip="true" {-{end}-} prop="{-{$c.Name}-}_label" align="center" label="{-{$c.Label}-}">
            <template #default="scope">
                {-{- if eq "tag" $c.Cmpnt.Type}-}
                <el-tag :type="tagColor(scope.row.{-{$c.Name}-},'{-{$c.Name}-}')"   round v-text="scope.row.{-{$c.Name}-}_label"></el-tag>
                {-{else}-}
                <span :class="'{-{$c.Style.CLR.BgColor}-}'==''?'':{-{$c.Style.CLR.BgColor}-}(scope.row.{-{$c.Name}-},'{-{$c.Name}-}')"
                    v-text="scope.row.{-{$c.Name}-}_label"></span>
                {-{- end}-}
            </template>
        </el-table-column>
        {-{- else if eq "tag" $c.Cmpnt.Type}-}
        <el-table-column  {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{end}-} prop="{-{$c.Name}-}_label" align="center" label="{-{$c.Label}-}">
            <template #default="scope">
                <el-tag type="tagColor(scope.row.{-{$c.Name}-},'{-{$c.Name}-}')" round  v-text="scope.row.{-{$c.Name}-}"></el-tag>
            </template>
        </el-table-column>
        {-{- else}-}
        <el-table-column show-overflow-tooltip  {-{if ne "" $c.Style.ListWidth}-} width="{-{$c.Style.ListWidth}-}" {-{end}-}  align="center" label="{-{$c.Label}-}" >
            <template #default="scope">
                  <span>{{ scope.row.{-{$c.Name}-}||'-' }}</span>
              </template>
        </el-table-column>
        {-{- end }-}
        {-{- end }-}
        {-{if gt $optLen 0}-}
        {-{- template "opts.tmpl.html" .}-}
        {-{- end }-}
    </el-table>
    <el-pagination :currentPage="form_{-{$table.UNQ}-}.pi" :page-size="form_{-{$table.UNQ}-}.ps"
        style="position: absolute; right: 30px;bottom:6px;" :page-sizes="[10,15,20,30, 50, 100]" :background="false" small
        layout="total,sizes,prev, pager, next, jumper" :total="total_{-{$table.UNQ}-}" @size-change="handleSizeChange"
        @current-change="handleCurrentChange" />
</div>
{-{- end}-}